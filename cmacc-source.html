<!-- Imports polymer -->
<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="./cmacc-ast.html">
<link rel="import" href="./cmacc-sidebar.html">

<link rel="import" href="./cmacc-variable.html">
<link rel="import" href="./cmacc-section.html">

<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-input/paper-textarea.html">
<link rel="import" href="../paper-button/paper-button.html">

<link rel="import" href="./cmacc-link.html">

<dom-module id="cmacc-source">
    <style>
        #source {
            white-space: pre-wrap;       /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
            white-space: -pre-wrap;      /* Opera 4-6 */
            white-space: -o-pre-wrap;    /* Opera 7 */
            word-wrap: break-word;       /* Internet Explorer 5.5+ */
        }
    </style>
    <template>

        <cmacc-ast id="ast" ast="{{ast}}"></cmacc-ast>

        <div id="source"></div>

    </template>
</dom-module>


<script>

    Polymer({
        is: 'cmacc-source',

        properties: {
            ast: {
                type: Object,
                observer: 'refresh'
            }
        },

        attached: function () {
            document.addEventListener('cmacc-changed', function (e) {
                this.refresh()
            }.bind(this))
        },

        refresh: function () {
            //window.cmacc.serialize(this.ast, function (err, text) {
            //    this.$.source.innerHTML = text;
            //}.bind(this), true)
        },

        save: function () {
            console.log('SAVE');
            //this.$.ast.parse(this.source);
        }

    });
</script>